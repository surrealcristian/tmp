<html>
<head>

<meta charset="utf-8">
<title>Test Title</title>

</head>
<body>

<h1>Chat Client</h1>

<div id="chat-messages"></div>

<div>
    <form method="POST" id="chat-form">
        <input type="text" id="chat-input" name="chat-input">
        <input type="submit" value="SEND">
    </form>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>

<script>

$(document).ready(function() {

    const chatMessages = $("#chat-messages");
    const chatForm     = $("#chat-form");
    const chatInput    = $("#chat-input");

    chatForm.submit(function(event) {
        const message = chatInput.val();

        ws.send(message);

        event.preventDefault();
    });

    const wsUrl = "ws://127.0.0.1:8080/chat";
    const ws = new WebSocket(wsUrl);

    ws.onopen = function(event) {
        console.log("[INFO] event: web socket onopen", event);
    };

    ws.onmessage = function(event) {
        console.log("[INFO] event: web socket onmessage", event);

        const message = event.data;

        const div = document.createElement("pre");

        div.innerHTML = message;

        chatMessages.append(div);
    };

    ws.onclose = function(event) {
        console.log("[INFO] event: web socket onclose", event);
    };

    ws.onerror = function(event) {
        console.log("[ERROR] event: web socket onerror", event);
    };
});

</script>

</body>
</html>
